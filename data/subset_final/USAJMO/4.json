{
    "competition_id": "2016_USAJMO_Problems",
    "problem_id": 6,
    "difficulty": 7,
    "problem": "Find all functions $f:\\mathbb{R}\\rightarrow \\mathbb{R}$ such that for all real numbers $x$ and $y$, \\[(f(x)+xy)\\cdot f(x-3y)+(f(y)+xy)\\cdot f(3x-y)=(f(x+y))^2.\\]",
    "solutions": {
        "Solution 1": "Set $x = y = 0$ to obtain $f(0) = 0.$\n Set $x = 0$ to obtain $f(y)f(-y) = f(y)^2.$\n$\\indent$ In particular, if $f(y) \\ne 0$ then $f(y) = f(-y).$\n$\\indent$ In addition, replacing $y \\to -t$, it follows that $f(t) = 0 \\implies f(-t) = 0$ for all $t \\in \\mathbb{R}.$\n Set $x = 3y$ to obtain $\\left[f(y) + 3y^2\\right]f(8y) = f(4y)^2.$\n$\\indent$ In particular, replacing $y \\to t/8$, it follows that $f(t) = 0 \\implies f(t/2) = 0$ for all $t \\in \\mathbb{R}.$\n Set $y = -x$ to obtain $f(4x)\\left[f(x) + f(-x) - 2x^2\\right] = 0.$\n$\\indent$ In particular, if $f(x) \\ne 0$, then $f(4x) \\ne 0$ by the observation from Step 3, because $f(4x) = 0 \\implies f(2x) = 0 \\implies f(x) = 0.$ Hence, the above equation implies that $2x^2 = f(x) + f(-x) = 2f(x)$, where the last step follows from the first observation from Step 2.\n$\\indent$ Therefore, either $f(x) = 0$ or $f(x) = x^2$ for each $x.$\n$\\indent$ Looking back on the equation from Step 3, it follows that $f(y) + 3y^2 \\ne 0$ for any nonzero $y.$ Therefore, replacing $y \\to t/4$ in this equation, it follows that $f(t) = 0 \\implies f(2t) = 0.$\n If $f(a) = f(b) = 0$, then $f(b - a) = 0.$\n$\\indent$ This follows by choosing $x, y$ such that $x - 3y = a$ and $3x - y = b.$ Then $x + y = \\tfrac{b - a}{2}$, so plugging $x, y$ into the given equation, we deduce that $f\\left(\\tfrac{b - a}{2}\\right) = 0.$ Therefore, by the third observation from Step 4, we obtain $f(b - a) = 0$, as desired.\n If $f \\not\\equiv 0$, then $f(t) = 0 \\implies t = 0.$\n$\\indent$ Suppose by way of contradiction that there exists an nonzero $t$ with $f(t) = 0.$ Choose $x, y$ such that $f(x) \\ne 0$ and $x + y = t.$ The following three facts are crucial:\n$\\indent$ 1. $f(y) \\ne 0.$ This is because $(x + y) - y = x$, so by Step 5, $f(y) = 0 \\implies f(x) = 0$, impossible.\n$\\indent$ 2. $f(x - 3y) \\ne 0.$ This is because $(x + y) - (x - 3y) = 4y$, so by Step 5 and the observation from Step 3, $f(x - 3y) = 0 \\implies f(4y) = 0 \\implies f(2y) = 0 \\implies f(y) = 0$, impossible.\n$\\indent$ 3. $f(3x - y) \\ne 0.$ This is because by the second observation from Step 2, $f(3x - y) = 0 \\implies f(y - 3x) = 0.$ Then because $(x + y) - (y - 3x) = 4x$, Step 5 together with the observation from Step 3 yield $f(3x - y) = 0 \\implies f(4x) = 0 \\implies f(2x) = 0 \\implies f(x) = 0$, impossible.\n$\\indent$ By the second observation from Step 4, these three facts imply that $f(y) = y^2$ and $f(x - 3y) = \\left(x - 3y\\right)^2$ and $f(3x - y) = \\left(3x - y\\right)^2.$ By plugging into the given equation, it follows that\n\\begin{align*} \\left(x^2 + xy\\right)\\left(x - 3y\\right)^2 + \\left(y^2 + xy\\right)\\left(3x - y\\right)^2 = 0. \\end{align*} But the above expression miraculously factors into $\\left(x + y\\right)^4$! This is clearly a contradiction, since $t = x + y \\ne 0$ by assumption. This completes Step 6.\n By Step 6 and the second observation from Step 4, the only possible solutions are $f \\equiv 0$ and $f(x) = x^2$ for all $x \\in \\mathbb{R}.$ It's easy to check that both of these work, so we're done.",
        "Solution 2": "Step 1: $x=y=0 \\implies f(0)=0$\nStep 2: $x=0 \\implies f(y)f(-y)=f(y)^{2}$. Now, assume $y \\not = 0$. Then, if $f(y)=0$, we substitute in $-y$ to get $f(y)f(-y)=f(-y)^{2}$, or $f(y)=f(-y)=0$. Otherwise, we divide both sides by $f(y)$ to get $f(y)=f(-y)$. If $y=0$, we obviously have $f(0)=f(0)$. Thus, the function is even.\n.\nStep 3: $y=-x \\implies 2f(4x)(f(x)-x^{2})=0$. Thus, $\\forall x$, we have $f(4x)=0$ or $f(x)=x^{2}$.\nStep 4: We now assume $f(x) \\not = 0$, $x\\not = 0$. We have $f(\\frac{x}{4})=\\frac{x^{2}}{16}$. Now, setting $x=y=\\frac{x}{4}$, we have $f(\\frac{x}{2})=\\frac{x^{2}}{4}$ or $f(\\frac{x}{2})=0$. The former implies that $f(x)=0$ or $x^{2}$. The latter implies that $f(x)=0$ or $f(x)=\\frac{x^{2}}{2}$. Assume the latter. $y=-2x \\implies -\\frac{3y^{2}}{2}f(7y)-{2y^{2}}f(5y)=\\frac{x^{2}}{2}$. Clearly, this implies that $f(x)$ is negative for some $m$. Now, we have $f(\\frac{m}{4})=\\frac{m^{2}}{16} \\implies f(\\frac{m}{2})=0,\\frac{m^{2}}{4} \\implies f(m) \\geq 0$, which is a contradiction. Thus, $\\forall x$$f(x)=0$ or $f(x)=x^{2}$.\nStep 5: We now assume $f(x)=0$, $f(y)=y^{2}$ for some $x,y \\not = 0$. Let $m$ be sufficiently large integer, let $z=|4^{m}x|$ and take the absolute value of $y$(since the function is even). Choose $c$ such that $3z-c=y$. Note that we have $\\frac{c}{z}$~$3$ and $\\frac{y}{z}$~$0$. Note that $f(z)=0$. Now, $x=z, y=c \\implies$ LHS is positive, as the second term is positive and the first term is nonnegative and thus the right term is equal to $(z+c)^{4}$~$256z^{4}$. Now if $f(z-3c)=0$, the second term of the LHS/RHS clearly ~0 as $m \\to \\infty$. if $f(z-3c)=0$, then we have LHS/RHS ~ $0$, otherwise, we have LHS/RHS~$\\frac{8^{2}\\cdot 3z^{4}}{256z^{4}}$~$\\frac{3}{4}$, a contradiction, as we're clearly not dividing by $0$, and we should have LHS/RHS=1."
    }
}